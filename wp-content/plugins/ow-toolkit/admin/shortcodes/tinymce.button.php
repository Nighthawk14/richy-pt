<?php
#-----------------------------------------------------------------## Register TinyMCE Shortcode Buttons#-----------------------------------------------------------------#function ow_tinymce_js() {    add_action( 'current_screen', 'thisScreen_owm' );	function thisScreen_owm() {		$currentScreen = get_current_screen();		if( $currentScreen->post_type === "page" )		{			// make sure the user has correct permissions			if ( ! current_user_can('edit_posts') && ! current_user_can('edit_pages') ) {				return;			}			// only add to visual mode			if ( get_user_option('rich_editing') == 'true' ) {				add_filter( 'mce_external_plugins', 'add_js_plugin' );				add_filter( 'mce_buttons', 'register_ow_tinymce_button' );			}		}	}	}add_action('init', 'ow_tinymce_js');function add_js_plugin( $plugin_array ) {    $plugin_array['ow_buttons'] = plugins_url( 'js/ow.tinymce.js', __FILE__ );//plugin_basename( __FILE__ ) . 'admin/shortcodes/ow.tinymce.js';    return $plugin_array;}#-----------------------------------------------------------------# Create Button#-----------------------------------------------------------------function register_ow_tinymce_button( $buttons ) {    array_push( $buttons, "owscgenerator" );  // "owscgenerator"  from tinymce.js    return $buttons; }